---
- name: 'Delete subnets'
  ec2_vpc_subnet:
    state: absent
    cidr: '{{ item.cidr }}'
    vpc_id: '{{ item.vpc_id }}'
  loop:
  - cidr: '{{ subnet_cidr_a_1 }}'
    vpc_id: '{{ vpc_id_a }}'
  - cidr: '{{ subnet_cidr_b_1 }}'
    vpc_id: '{{ vpc_id_b }}'
  ignore_errors: True

- name: 'Delete'
  ec2_vpc_net:
    state: absent
    cidr_block: '{{ item.cidr }}'
    name: '{{ item.name }}'
  loop:
  - cidr: '{{ vpc_cidr_a }}'
    name: '{{ vpc_name_a }}'
  - cidr: '{{ vpc_cidr_b }}'
    name: '{{ vpc_name_b }}'
  ignore_errors: True
